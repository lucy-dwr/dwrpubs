% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/author_divisions.R
\name{annotate_author_divisions}
\alias{annotate_author_divisions}
\title{Annotate metadata with author division information.}
\usage{
annotate_author_divisions(
  metadata,
  employees,
  pattern,
  author_flag_column = NULL,
  column_prefix = "first_affiliated",
  max_year_gap = 1L,
  max_distance = 0.3
)
}
\arguments{
\item{metadata}{Tibble produced in the metadata aggregation pipeline; must
include \code{authors}, \code{author_affiliations}, and \code{publication_year} columns.}

\item{employees}{Tibble of employee division records as produced by
\code{data-raw/employees.R}.}

\item{pattern}{Affiliation pattern (regex) used to identify org-linked
authors.}

\item{author_flag_column}{Optional logical column in \code{metadata} restricting
rows that should be considered for matching (e.g., \code{"dwr_author"}).}

\item{column_prefix}{Prefix applied to generated column names. The function
appends \verb{_author}, \verb{_author_position}, and \verb{_author_division}.}

\item{max_year_gap}{Maximum absolute difference between publication year and
employee record year considered for fuzzy matching.}

\item{max_distance}{Maximum normalized Levenshtein distance allowed when
matching author names to employee records. Distances above this threshold
yield \code{NA} matches.}
}
\value{
A copy of \code{metadata} with three additional columns based on
\code{column_prefix}.
}
\description{
Identifies the first author whose affiliation matches the supplied pattern
and assigns the corresponding employee division via fuzzy name matching.
Columns are appended using the provided prefix so callers can distinguish
organization-specific annotations.
}
\keyword{internal}
